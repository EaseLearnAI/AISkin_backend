 # AI护肤系统API测试

本目录包含用于测试AI护肤系统API的自动化测试脚本。

## 测试准备

### 1. 安装依赖

在项目根目录运行：

```bash
npm install axios form-data
```

### 2. 准备测试图片

在`tests`目录中放置一张名为`product.png`的护肤品图片。
这张图片应该包含清晰可见的产品名称和成分表，以便OCR能够正确识别。

### 3. 启动服务器

确保MongoDB服务已启动，然后在项目根目录运行：

```bash
npm run dev
```

## 运行测试

### 1. 注册测试用户

首先运行以下命令注册测试用户（如果用户已存在会自动跳过）：

```bash
node tests/register_user.js
```

### 2. 运行API测试

运行主测试脚本：

```bash
node tests/api_test.js
```

## 测试内容

测试脚本包含以下测试内容：

1. 用户登录
2. 创建产品（无需提供产品名称）
3. 创建带标签的产品
4. 上传产品图片
5. 提取产品成分（OCR）
6. 分析产品成分（AI）
7. 获取用户所有产品
8. 根据标签获取用户产品
9. 获取单个产品详情
10. 获取产品成分分析
11. 更新产品（包括开封日期）
12. 清理测试数据

## 注意事项

- 测试脚本会自动清理创建的测试数据
- 所有API请求都会显示详细的请求和响应数据
- 测试脚本会在出错时中断执行
- 测试用户为：`abc1567849@gmail.com` / `12345678`